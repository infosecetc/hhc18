



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="Dan Roberts">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.2.0">
    
    
      
        <title>DevOps Fail - 2018 SANS Holiday Hack Challenge Solution</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.572ca0f0.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#ef5350">
      
    
    
      <script src="../assets/javascripts/modernizr.8c900955.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="red" data-md-color-accent="green">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#devops-fail" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="2018 SANS Holiday Hack Challenge Solution" class="md-header-nav__button md-logo">
          
            <i class="md-icon">ac_unit</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                2018 SANS Holiday Hack Challenge Solution
              </span>
              <span class="md-header-nav__topic">
                DevOps Fail
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="2018 SANS Holiday Hack Challenge Solution" class="md-nav__button md-logo">
      
        <i class="md-icon">ac_unit</i>
      
    </a>
    2018 SANS Holiday Hack Challenge Solution
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../index.html" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../linecon.html" title="LineCon" class="md-nav__link">
      LineCon
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../castle.html" title="Castle" class="md-nav__link">
      Castle
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Objectives
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Objectives
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Objectives/1-orientation.html" title="Orientation" class="md-nav__link">
      Orientation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Objectives/2-cfp.html" title="Directory Browsing" class="md-nav__link">
      Directory Browsing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Objectives/3-sequence.html" title="de Bruijn Sequences" class="md-nav__link">
      de Bruijn Sequences
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Objectives/4-datarepo.html" title="Data Repo Analysis" class="md-nav__link">
      Data Repo Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Objectives/5-adpriv.html" title="AD Privilege Discovery" class="md-nav__link">
      AD Privilege Discovery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Objectives/6-badge.html" title="Badge Manipulation" class="md-nav__link">
      Badge Manipulation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Objectives/7-hr.html" title="HR Incident Response" class="md-nav__link">
      HR Incident Response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Objectives/8-packalyzer.html" title="Network Traffic Forensics" class="md-nav__link">
      Network Traffic Forensics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Objectives/9-ransomware.html" title="Ransomware Discovery" class="md-nav__link">
      Ransomware Discovery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Objectives/10-whodunit.html" title="Who is Behind it All?" class="md-nav__link">
      Who is Behind it All?
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Terminal Challenges
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Terminal Challenges
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="1-namegame.html" title="The Name Game" class="md-nav__link">
      The Name Game
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="2-editorskills.html" title="Essential Editor Skills" class="md-nav__link">
      Essential Editor Skills
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="3-curling.html" title="CURLing Master" class="md-nav__link">
      CURLing Master
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="4-stallmucking.html" title="Stall Mucking Report" class="md-nav__link">
      Stall Mucking Report
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="5-pythonescape.html" title="Python Escape from LA" class="md-nav__link">
      Python Escape from LA
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        DevOps Fail
      </label>
    
    <a href="6-devopsfail.html" title="DevOps Fail" class="md-nav__link md-nav__link--active">
      DevOps Fail
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#problem" title="Problem" class="md-nav__link">
    Problem
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hints" title="Hints" class="md-nav__link">
    Hints
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution" title="Solution" class="md-nav__link">
    Solution
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="7-thesleighbell.html" title="The Seighbell" class="md-nav__link">
      The Seighbell
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="8-forensics.html" title="Lethal ForensicELFication" class="md-nav__link">
      Lethal ForensicELFication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="9-loganalysis.html" title="Yule Log Analysis" class="md-nav__link">
      Yule Log Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="10-ventilation.html" title="Ventilation Maze" class="md-nav__link">
      Ventilation Maze
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../narrative.html" title="Narrative" class="md-nav__link">
      Narrative
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../eggs.html" title="Easter Eggs" class="md-nav__link">
      Easter Eggs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../answers.html" title="Answers" class="md-nav__link">
      Answers
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#problem" title="Problem" class="md-nav__link">
    Problem
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hints" title="Hints" class="md-nav__link">
    Hints
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution" title="Solution" class="md-nav__link">
    Solution
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="devops-fail">DevOps Fail</h1>
<p>Location: Balcony</p>
<h2 id="problem">Problem</h2>
<div class="codehilite"><pre><span></span>Coalbox again, and I&#39;ve got one more ask.
Sparkle Q. Redberry has fumbled a task.
Git pull and merging, she did all the day;
With all this gitting, some creds got away.

Urging - I scolded, &quot;Don&#39;t put creds in git!&quot;
She said, &quot;Don&#39;t worry - you&#39;re having a fit.
If I did drop them then surely I could,
Upload some new code done up as one should.&quot;

Though I would like to believe this here elf,
I&#39;m worried we&#39;ve put some creds on a shelf.
Any who&#39;s curious might find our &quot;oops,&quot;
Please find it fast before some other snoops!

Find Sparkle&#39;s password, then run the runtoanswer tool.
elf@9092171c76b6:~$ 
</pre></div>


<h2 id="hints">Hints</h2>
<p>Sparkle Redberry introduces this terminal: </p>
<blockquote>
<p>Hi, I'm Sparkle Redberry!</p>
<p>Ugh, can you believe that Elf Resources is poking around? Something about sensitive info in my git repo.</p>
<p>I mean, I may have uploaded something sensitive earlier, but it's no big deal. I overwrote it!</p>
<p>Care to check my Cranberry Pi terminal and prove me right?</p>
</blockquote>
<p>Sparkle also provides a link to a webpage on Git commands: <a href="https://gist.github.com/hofmannsven/6814451">https://gist.github.com/hofmannsven/6814451</a></p>
<p>Sparkle also provides a link to a webpage on finding passwords in git: <a href="https://en.internetwache.org/dont-publicly-expose-git-or-how-we-downloaded-your-websites-sourcecode-an-analysis-of-alexas-1m-28-07-2015/">https://en.internetwache.org/dont-publicly-expose-git-or-how-we-downloaded-your-websites-sourcecode-an-analysis-of-alexas-1m-28-07-2015/</a></p>
<h2 id="solution">Solution</h2>
<p>Sparkle says he uploaded some sensitive data to the git repository, but removed it by overwriting it with other data.  Unfortunately for Sparkle, we can view the change history of files that have been checked in.  First thing I do is check to see what files are present, then see if the word password appears in any of them.</p>
<div class="codehilite"><pre><span></span>elf@b85bd43fa6ea:~/kcconfmgmt$ ls -la 
total 72
drwxr-xr-x 1 elf elf  4096 Nov 14 09:48 .
drwxr-xr-x 1 elf elf  4096 Dec 14 16:30 ..
drwxr-xr-x 1 elf elf  4096 Nov 14 09:48 .git
-rw-r--r-- 1 elf elf    66 Nov  1 15:30 README.md
-rw-r--r-- 1 elf elf  1074 Nov  3 20:28 app.js
-rw-r--r-- 1 elf elf 31003 Nov 14 09:46 package-lock.json
-rw-r--r-- 1 elf elf   537 Nov 14 09:48 package.json
drwxr-xr-x 1 elf elf  4096 Nov  2 15:05 public
drwxr-xr-x 1 elf elf  4096 Nov  2 15:05 routes
drwxr-xr-x 1 elf elf  4096 Nov 14 09:47 server
drwxr-xr-x 1 elf elf  4096 Nov  2 15:05 views

elf@b85bd43fa6ea:~/kcconfmgmt$ grep -i -R password *
public/bower_components/purecss/src/forms/css/forms.css:.pure-form-stacked input[type=&quot;password&quot;],
server/config/config.js.def:    &#39;url&#39; : &#39;mongodb://username:password@127.0.0.1:27017/node-api&#39;
server/config/passport.js:    // change default username and password, to email andpassword
server/config/passport.js:    passwordField : &#39;password&#39;,
</pre></div>


<p>Looks like there are passwords stored in config.js.def and passport.js.  Let's take a look at the commit logs and filter those specific lines with grep.</p>
<div class="codehilite"><pre><span></span>elf@71bcde2d228b:~/kcconfmgmt$ git log -p | egrep &quot;(mongodb\:|passwordField)&quot;
+    passwordField : &#39;password&#39;,
+    passwordField : &#39;password&#39;,
-    &#39;url&#39; : &#39;mongodb://sredberry:twinkletwinkletwinkle@127.0.0.1:27017/node-api&#39;
+    &#39;url&#39; : &#39;mongodb://username:password@127.0.0.1:27017/node-api&#39;
-    &#39;url&#39; : &#39;mongodb://sredberry:twinkletwinkletwinkle@127.0.0.1:10073/node-api&#39;
+    &#39;url&#39; : &#39;mongodb://sredberry:twinkletwinkletwinkle@127.0.0.1:27017/node-api&#39;
+    &#39;url&#39; : &#39;mongodb://sredberry:twinkletwinkletwinkle@127.0.0.1:10073/node-api&#39;
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Grep's -E option allows you to use extended regular expressions, which gives you additional capabilities like specifying multiple search strings.</p>
</div>
<p>There's nothing interesting in passwordField, but the mongodb connection string has Sparkle's username and password as sredberry:twinkletwinkletwinkle.</p>
<div class="codehilite"><pre><span></span>elf@b85bd43fa6ea:~/kcconfmgmt$ runtoanswer 
Loading, please wait......
Enter Sparkle Redberry&#39;s password: twinkletwinkletwinkle

This ain&#39;t &quot;I told you so&quot; time, but it&#39;s true:
I shake my head at the goofs we go through.
Everyone knows that the gits aren&#39;t the place;
Store your credentials in some safer space.

Congratulations!
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="5-pythonescape.html" title="Python Escape from LA" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Python Escape from LA
              </span>
            </div>
          </a>
        
        
          <a href="7-thesleighbell.html" title="The Seighbell" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                The Seighbell
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.b41f3d20.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>